(this["webpackJsonpjournal-app"]=this["webpackJsonpjournal-app"]||[]).push([[0],{184:function(e,t,n){},185:function(e,t,n){"use strict";n.r(t);var a=n(7),r=n.n(a),c=n(42),o=n.n(c),s=n(0),i=n.n(s),u=n(1),l=n(13),d=n(15),j=n(12),b=n(27),p=n(28),m=n.n(p),O=n(75),f=n(30),h=Object(O.a)({apiKey:"AIzaSyBu5XISm-BYPmMMrZdeWYXu9lwmuuPrVZk",authDomain:"react-course-7a750.firebaseapp.com",projectId:"react-course-7a750",storageBucket:"react-course-7a750.appspot.com",messagingSenderId:"364285678064",appId:"1:364285678064:web:c6c86dcecb2bd437898d35"}),x=Object(b.f)(h),v=new f.a,g=Object(f.c)(),_=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.e)(Object(b.b)(x,"".concat(t,"/journal/notes")));case 2:return n=e.sent,a=[],n.forEach((function(e){a.push(Object(j.a)({id:e.id},e.data()))})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.cloudinary.com/v1_1/dennzi6el/upload",(n=new FormData).append("upload_preset","React-Journal"),n.append("file",t),e.prev=4,e.next=7,fetch("https://api.cloudinary.com/v1_1/dennzi6el/upload",{method:"POST",body:n});case 7:if(!(a=e.sent).ok){e.next=15;break}return e.next=11,a.json();case 11:return r=e.sent,e.abrupt("return",r.secure_url);case 15:return e.abrupt("return",null);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(4),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),N={login:"[Auth] Login",logout:"[Auth] Logout",uiSetError:"[UI] Set Error",uiRemoveError:"[UI] Remove Error",uiStartLoading:"[UI] Start loading",uiFinishLoading:"[UI] Finish loading",notesAddNew:"[Notes] New note",notesActive:"[Notes] Set active note",notesLoad:"[Notes] Load notes",notesUpdated:"[Notes] Updated Note",notesFileUrl:"[Notes] Updated image url",notesDelete:"[Notes] Delete note",notesLogoutCleaning:"[Notes] Logout cleaning"},w=function(e,t){return{type:N.notesActive,payload:Object(j.a)({id:e},t)}},k=function(e){return{type:N.notesAddNew,payload:e}},E=function(e){return{type:N.notesLoad,payload:e}},C=function(e){return{type:N.notesUpdated,payload:e}},L=function(e){return{type:N.notesDelete,payload:e}},S=n(4),I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(l.a)(t,2),r=n[0],c=n[1],o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;c(t)},s=function(e){var t=e.target;c(Object(j.a)(Object(j.a)({},r),{},Object(S.a)({},t.name,t.value)))};return[r,s,o]},R=n(6),D=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.notes})).active;return Object(R.jsxs)("div",{className:"notes__appbar",children:[Object(R.jsx)("span",{children:"28 agosto del 2020"}),Object(R.jsx)("input",{id:"fileSelector",className:"btn",type:"file",style:{display:"none"},onChange:function(n){var a=n.target,r=Object(l.a)(a.files,1)[0];r&&e(w(t.id,Object(j.a)(Object(j.a)({},t),{},{url:URL.createObjectURL(r),file:r})))}}),Object(R.jsxs)("div",{children:[Object(R.jsx)("button",{className:"btn",onClick:function(){document.querySelector("#fileSelector").click()},children:"Picture"}),Object(R.jsx)("button",{className:"btn",onClick:function(){e(function(e){return function(){var t=Object(u.a)(i.a.mark((function t(n,a){var r,c,o,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(m.a.fire({title:"Uploading...",text:"Please Wait",allowOutsideClick:!1,didOpen:function(){m.a.showLoading()}}),r=a().auth.uid,c=Object(j.a)({},e),e.url||delete c.url,!e.file){t.next=10;break}return t.next=7,y(e.file);case 7:o=t.sent,c.url=o,delete c.file;case 10:return delete c.id,t.prev=11,s=Object(b.d)(x,"".concat(r,"/journal/notes/").concat(e.id)),t.next=15,Object(b.g)(s,c);case 15:n(C(Object(j.a)(Object(j.a)({},c),{},{id:e.id}))),m.a.fire("Nota Actualizada","Nota actualizada correctamente","success"),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(11),console.log(t.t0),m.a.fire("Error","Error al actualizar la nota","error");case 23:case"end":return t.stop()}}),t,null,[[11,19]])})));return function(e,n){return t.apply(this,arguments)}}()}(t))},children:"Save"})]})]})},U=function(){var e=Object(d.c)((function(e){return e.notes})).active,t=Object(d.b)(),n=I(e),r=Object(l.a)(n,3),c=r[0],o=r[1],s=r[2],p=c.title,O=c.body,f=Object(a.useRef)(e.id),h=Object(a.useRef)(e.url);return Object(a.useEffect)((function(){f.current===e.id&&h.current===e.url||(s(e),f.current=e.id,h.current=e.url)}),[e,s]),Object(a.useEffect)((function(){t(w(c.id,Object(j.a)({},c)))}),[c,t]),Object(R.jsxs)("div",{className:"notes__main-content",children:[Object(R.jsx)(D,{}),Object(R.jsxs)("div",{className:"notes__content",children:[Object(R.jsx)("input",{type:"text",placeholder:"Some awesome title",className:"notes__title-input",autoComplete:"off",name:"title",value:p,onChange:o}),Object(R.jsx)("textarea",{placeholder:"What Happend Today",className:"notes__text-area",name:"body",value:O,onChange:o}),e.url&&Object(R.jsx)("div",{className:"notes__image",children:Object(R.jsx)("img",{src:"".concat(e.url),alt:"Journal"})})]}),Object(R.jsx)("button",{className:"btn btn-danger",onClick:function(){return t((n=e.id,function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a().auth.uid,e.next=3,m.a.fire({title:"Estas seguro?",text:"Los datos eliminados no se podran recuperar!",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Eliminar!",cancelButtonText:"No, cancelar!",reverseButtons:!0});case 3:if(!(c=e.sent).isConfirmed){e.next=11;break}return e.next=7,Object(b.c)(Object(b.d)(x,"".concat(r,"/journal/notes/").concat(n)));case 7:t(L(n)),m.a.fire("Eliminado!","Tu nota ha sido eliminada exitosamente.","success"),e.next=12;break;case 11:c.dismiss===m.a.DismissReason.cancel&&m.a.fire("Cancelado","Nota no eliminada","error");case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));var n},children:"Delete"})]})},A=function(){return Object(R.jsxs)("div",{className:"nothing__main-content",children:[Object(R.jsxs)("p",{children:["Select something",Object(R.jsx)("br",{}),"or create an entry!"]}),Object(R.jsx)("i",{className:"far fa-star fa-4x mt-5"})]})},P=function(e){return{type:N.uiSetError,payload:e}},T=function(){return{type:N.uiRemoveError}},B=function(){return{type:N.uiFinishLoading}},z=function(e,t){return{type:N.login,payload:{uid:e,name:t}}},F=function(){return{type:N.logout}},J=n(76),M=n.n(J),W=function(e){var t=e.id,n=e.date,a=e.title,r=e.body,c=e.url,o=M()(n),s=Object(d.b)();return Object(R.jsxs)("div",{className:"journal__entry pointer animate__animated animate__fadeInLeft animate__faster",onClick:function(){s(w(t,{title:a,body:r,url:c,date:n}))},children:[c&&Object(R.jsx)("div",{className:"journal__entry-picture",style:{backgroundSize:"cover",backgroundImage:"url(".concat(c,")"),backgroundPosition:"center"}}),Object(R.jsxs)("div",{className:"journal__entry-body",children:[Object(R.jsx)("p",{className:"journal__entry-title",children:a}),Object(R.jsx)("p",{className:"journal__entry-content",children:r})]}),Object(R.jsxs)("div",{className:"journal__entry-date-box",children:[Object(R.jsx)("span",{children:o.format("dddd")}),Object(R.jsx)("h4",{children:o.format("Do")})]})]})},X=function(){var e=Object(d.c)((function(e){return e.notes})).notes;return Object(R.jsx)("div",{className:"journal__entries",children:e.map((function(e){return Object(R.jsx)(W,Object(j.a)({},e),e.id)}))})},q=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.auth})).name;return Object(R.jsxs)("aside",{className:"journal__sidebar",children:[Object(R.jsxs)("div",{className:"journal__sidebar-navbar",children:[Object(R.jsxs)("h3",{className:"mt-5 journal__sidebar-username",children:[Object(R.jsx)("i",{className:"fa-solid fa-user"}),Object(R.jsx)("span",{children:t})]}),Object(R.jsx)("button",{className:"btn",onClick:function(){e(function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(f.f)(g);case 3:t(F()),t({type:N.notesLogoutCleaning}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())},children:"Logout"})]}),Object(R.jsxs)("div",{className:"journal__new-entry",onClick:function(){e(function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().auth.uid,r={title:"",body:"",date:(new Date).getTime()},e.prev=2,e.next=5,Object(b.a)(Object(b.b)(x,"".concat(a,"/journal/notes")),r);case 5:c=e.sent,t(w(c.id,r)),t(k(Object(j.a)({id:c.id},r))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("Error adding document: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}())},children:[Object(R.jsx)("i",{className:"fa-solid fa-calendar-day fa-4x"}),Object(R.jsx)("p",{className:"mt-5",children:"New Entry"})]}),Object(R.jsx)(X,{})]})},G=function(){var e=Object(d.c)((function(e){return e.notes})).active;return Object(R.jsxs)("div",{className:"journal__content",children:[Object(R.jsx)(q,{}),Object(R.jsx)("main",{children:e?Object(R.jsx)(U,{}):Object(R.jsx)(A,{})})]})},V=n(14),Y=n(32),Z=n(46),H=n.n(Z),K=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.ui.msgError})),n=Object(d.c)((function(e){return e.ui.loading})),a=I({email:"",password:""}),r=Object(l.a)(a,2),c=r[0],o=c.email,s=c.password,j=r[1];return Object(R.jsxs)("div",{className:"animate__animated animate__fadeIn animate__faster",children:[Object(R.jsx)("h3",{className:"auth__title mb-5",children:"Login"}),Object(R.jsxs)("form",{onSubmit:function(t){t.preventDefault(),""!==o.trim()&&""!==s.trim()?H.a.isEmail(o)?(e(T()),e(function(e,t){return function(){var n=Object(u.a)(i.a.mark((function n(a){var r,c;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:N.uiStartLoading}),n.prev=1,n.next=4,Object(f.d)(g,e,t);case 4:r=n.sent,c=r.user,a(z(c.uid,c.displayName)),a(B()),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),a(B()),m.a.fire("Error",n.t0.message,"error");case 14:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e){return n.apply(this,arguments)}}()}(o,s))):e(P("El email no es valido")):e(P("Todos los campos son obligatorios"))},children:[t&&Object(R.jsx)("div",{className:"auth__alert-error",children:t}),Object(R.jsx)("input",{type:"text",placeholder:"Email",name:"email",value:o,className:"auth__input mb-5",autoComplete:"off",onChange:j}),Object(R.jsx)("input",{type:"password",placeholder:"Password",name:"password",value:s,className:"auth__input mb-5",autoComplete:"off",onChange:j}),Object(R.jsx)("button",{type:"submit",className:"btn btn-primary pointer btn-block",disabled:n,children:"Login"}),Object(R.jsx)("hr",{}),Object(R.jsxs)("div",{className:"auth__social-networks",children:[Object(R.jsx)("p",{children:"Login With Social Networks"}),Object(R.jsxs)("div",{className:"google-btn",onClick:function(){e(T()),e((function(e){Object(f.e)(g,v).then((function(t){e(z,t.user.uid,t.user.displayName)})).catch((function(e){console.log(e)}))}))},children:[Object(R.jsx)("div",{className:"google-icon-wrapper",children:Object(R.jsx)("img",{className:"google-icon",src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg",alt:"google button"})}),Object(R.jsx)("p",{className:"btn-text",children:Object(R.jsx)("b",{children:"Sign in with google"})})]})]}),Object(R.jsx)(Y.b,{to:"/auth/register",className:"link",children:"Create New Account"})]})]})},Q=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.ui.msgError})),n=I({name:"",email:"",password:"",password2:""}),a=Object(l.a)(n,2),r=a[0],c=a[1],o=r.name,s=r.email,j=r.password,b=r.password2,p=function(){return""===o.trim()?(e(P("Name is required")),!1):H.a.isEmail(s)?!(j.length<5||j!==b)||(e(P("Password should be at least 5 characters and match each others")),!1):(e(P("Email is not valid")),!1)};return Object(R.jsxs)("div",{className:"animate__animated animate__fadeIn animate__faster",children:[Object(R.jsx)("h3",{className:"auth__title mb-5",children:"Register"}),Object(R.jsxs)("form",{onSubmit:function(t){t.preventDefault(),p()&&(e(T()),e(function(e,t,n){return function(){var a=Object(u.a)(i.a.mark((function a(r){var c,o;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(f.b)(g,e,t);case 3:return c=a.sent,o=c.user,a.next=7,Object(f.g)(o,{displayName:n});case 7:r(z(o.uid,o.displayName)),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),m.a.fire("Error",a.t0.message,"error");case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}(s,j,o)))},children:[t&&Object(R.jsx)("div",{className:"auth__alert-error",children:t}),Object(R.jsx)("input",{type:"text",placeholder:"Name",name:"name",className:"auth__input mb-5",autoComplete:"off",value:o,onChange:c}),Object(R.jsx)("input",{type:"text",placeholder:"Email",name:"email",className:"auth__input mb-5",autoComplete:"off",value:s,onChange:c}),Object(R.jsx)("input",{type:"password",placeholder:"Password",name:"password",className:"auth__input mb-5",autoComplete:"off",value:j,onChange:c}),Object(R.jsx)("input",{type:"password",placeholder:"Conifrm Password",name:"password2",className:"auth__input mb-5",autoComplete:"off",value:b,onChange:c}),Object(R.jsx)("button",{type:"submit",className:"btn btn-primary pointer btn-block mb-5",children:"Register"}),Object(R.jsx)(Y.b,{to:"/auth/login",className:"link",children:"Already Register"})]})]})},$=function(){return Object(R.jsx)("div",{className:"auth",children:Object(R.jsx)("div",{className:"auth__container mb-5",children:Object(R.jsxs)(V.d,{children:[Object(R.jsx)(V.b,{exact:!0,path:"/auth/login",component:K}),Object(R.jsx)(V.b,{exact:!0,path:"/auth/Register",component:Q}),Object(R.jsx)(V.a,{to:"/auth/login"})]})})})},ee=n(43),te=function(){return Object(R.jsx)("div",{className:"auth",children:Object(R.jsx)("div",{className:"spinner"})})},ne=n(47),ae=["component","isLoggedIn"],re=function(e){var t=e.component,n=e.isLoggedIn,a=Object(ne.a)(e,ae);return Object(R.jsx)(V.b,Object(j.a)(Object(j.a)({},a),{},{component:function(e){return n?Object(R.jsx)(t,Object(j.a)({},e)):Object(R.jsx)(V.a,{to:"/auth/login"})}}))},ce=["isLoggedIn","component"],oe=function(e){var t=e.isLoggedIn,n=e.component,a=Object(ne.a)(e,ce);return Object(R.jsx)(V.b,Object(j.a)(Object(j.a)({},a),{},{component:function(e){return t?Object(R.jsx)(V.a,{to:"/"}):Object(R.jsx)(n,Object(j.a)({},e))}}))},se=function(){var e=Object(a.useState)(!0),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),o=Object(l.a)(c,2),s=o[0],j=o[1],b=Object(d.b)();return Object(a.useEffect)((function(){Object(ee.d)(g,function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?(b(z(t.uid,t.displayName)),j(!0),b(function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().auth.uid,e.next=3,_(a);case 3:r=e.sent,t(E(r));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())):j(!1),r(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[b,r,j]),n?Object(R.jsx)(te,{}):Object(R.jsx)(Y.a,{children:Object(R.jsxs)(V.d,{children:[Object(R.jsx)(oe,{path:"/auth",component:$,isLoggedIn:s}),Object(R.jsx)(re,{exact:!0,path:"/",component:G,isLoggedIn:s}),Object(R.jsx)(V.a,{to:"/"})]})})},ie=n(40),ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.login:return{uid:t.payload.uid,name:t.payload.name};case N.logout:return{};default:return e}},le=n(78),de={loading:!1,msgError:null},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.uiSetError:return Object(j.a)(Object(j.a)({},e),{},{msgError:t.payload});case N.uiRemoveError:return Object(j.a)(Object(j.a)({},e),{},{msgError:null});case N.uiStartLoading:return Object(j.a)(Object(j.a)({},e),{},{loading:!0});case N.uiFinishLoading:return Object(j.a)(Object(j.a)({},e),{},{loading:!1});default:return e}},be=n(20),pe={notes:[],active:null},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.notesActive:return Object(j.a)(Object(j.a)({},e),{},{active:Object(j.a)({},t.payload)});case N.notesAddNew:return Object(j.a)(Object(j.a)({},e),{},{notes:[t.payload].concat(Object(be.a)(e.notes))});case N.notesLoad:return Object(j.a)(Object(j.a)({},e),{},{notes:Object(be.a)(t.payload)});case N.notesUpdated:return Object(j.a)(Object(j.a)({},e),{},{notes:e.notes.map((function(e){return e.id===t.payload.id?t.payload:e}))});case N.notesDelete:return Object(j.a)(Object(j.a)({},e),{},{active:null,notes:e.notes.filter((function(e){return e.id!==t.payload}))});case N.notesLogoutCleaning:return{notes:[],active:null};default:return e}},Oe=Object(ie.b)({auth:ue,ui:je,notes:me}),fe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ie.c,he=Object(ie.d)(Oe,fe(Object(ie.a)(le.a))),xe=function(){return Object(R.jsx)(d.a,{store:he,children:Object(R.jsx)(se,{})})};n(184);o.a.render(Object(R.jsx)(r.a.StrictMode,{children:Object(R.jsx)(xe,{})}),document.getElementById("root"))}},[[185,1,2]]]);
//# sourceMappingURL=main.740e837f.chunk.js.map